import json
import glob
from pathlib import Path

# 扫描当前目录下所有的JSON文件（排除脚本生成的）
json_files = []
for file in Path('.').glob('*.json'):
    # 排除生成的导出文件
    if file.name not in ['games.json']:
        game_name = file.stem
        json_files.append({
            'name': game_name,
            'file': file.name,
            'icon': '🎮'  # 默认图标，可以手动修改
        })

# 根据游戏名称添加合适的emoji图标
icons = {
    '第五人格': '🎭',
    '暗区突围': '🔫',
    '重返未来': '⏰',
    '原神': '⚔️',
    '崩坏：星穹铁道': '🚀',
    '和平精英': '🎯',
    '地下城与勇士': '⚔️',
    '英雄联盟': '🏆',
    '部落冲突': '⚔️',
    '炉石传说': '🃏',
    '穿越火线': '🔫',
    'DNF': '⚔️',
    '逆水寒': '⚔️',
    '逆水寒手游': '📱',
    '天涯明月刀': '⚔️',
    '剑网3': '⚔️',
    '永劫无间': '⚔️',
    'QQ飞车': '🏎️',
    '永劫无间手游': '📱',
    '永劫无间手游PC': '💻',
    'APEX英雄': '🎮',
    'PUBG和平精英': '🎯',
    'PC端可见范围': '💻',
    '永劫无间端游': '💻',
    '永劫无间手游': '📱',
    '无畏契约': '🔫',
    '三角洲行动': '⚔️',
    '黑色沙漠手游': '🏜️',
    '跑跑卡丁车': '🏎️',
    '跑跑卡丁车手游': '📱',
    'QQ飞车': '🏎️',
    'QQ飞车手游': '📱',
    'CF手游': '📱',
    'CF手游PC': '💻',
    '使命召唤手游': '📱',
    '使命召唤：手游': '📱',
    '明日之后': '🌍',
    '哈利波特：魔法觉醒': '⚡',
    '第五人格': '🎭',
    '第五人格PC': '💻',
    '第五人格手游': '📱',
    '天启行动': '🚀',
    '荒野乱斗': '⚔️',
    '香肠派对': '🎉',
    '奥比岛：梦想国度': '🏝️',
    '奥比岛：梦想国度手游': '📱',
    '第五人格': '🎭',
    '白夜极光': '✨',
    '幻塔': '⚔️',
    '幻塔手游': '📱',
    '幻塔PC': '💻',
    '极乐迪斯科': '🪩',
    '黎明觉醒': '🌅',
    '黎明觉醒：生机': '🌱',
    '妄想山海': '🐉',
    '以闪亮之名': '✨',
    '逆水寒': '⚔️',
    '逆战': '🔫',
    '逆战双端': '💻',
    '阴阳师': '👺',
    '阴阳师百闻牌': '🎴',
    '阴阳师：百闻牌': '🎴',
    '永劫无间': '⚔️',
    '洛克王国': '🐰',
    '火影忍者': '🍥',
    '火影忍者手游': '📱',
    '火影忍者-疾风传': '💨',
    '火影忍者-手游': '📱',
    '火影手游': '📱',
    '第五人格': '🎭'
}

# 为每个游戏添加合适的图标
for game in json_files:
    game_name = game['name']
    for name_pattern, icon in icons.items():
        if name_pattern in game_name:
            game['icon'] = icon
            break

# 保存为games.json
with open('games.json', 'w', encoding='utf-8') as f:
    json.dump(json_files, f, ensure_ascii=False, indent=2)

print(f"已生成游戏列表文件: games.json")
print(f"共发现 {len(json_files)} 个游戏数据文件")
